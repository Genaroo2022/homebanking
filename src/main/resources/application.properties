spring.application.name=homebanking
spring.profiles.active=dev

# JWT Configuration
jwt.secret=${JWT_SECRET}
jwt.expiration=86400000
jwt.refresh-expiration=604800000
totp.issuer=HomeBanking
totp.time-step=30
totp.digits=6
totp.window=1

# HTTPS / TLS
security.require-https=false
server.forward-headers-strategy=framework
server.ssl.enabled=false
server.servlet.session.cookie.secure=false
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.same-site=strict

spring.h2.console.enabled=true
spring.h2.console.path=/h2-console


# ============================================================
# SCHEDULING (Procesamiento asincrónico de transferencias)
# ============================================================

# Habilitar scheduling
spring.task.scheduling.enabled=true
spring.task.scheduling.thread-name-prefix=transfer-scheduler-
spring.task.scheduling.pool.size=2

# Procesamiento de transferencias pendientes
transfer.processor.fixed-delay=5000
transfer.processor.initial-delay=10000

# Reintentos de transferencias fallidas
transfer.processor.retry.fixed-delay=30000
transfer.processor.retry.initial-delay=30000

# ============================================================
# TRANSACCIONES
# ============================================================

# Aislamiento: READ_COMMITTED para mejor concurrencia
spring.jpa.properties.hibernate.connection.isolation=2

# Pool de conexiones
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000

# Timeout de transacciones
spring.jpa.properties.hibernate.jdbc.batch_size=10

# ============================================================
# REDIS (Brute Force Protection)
# ============================================================
spring.redis.host=localhost
spring.redis.port=6379

# ============================================================
# RATE LIMITING (Login)
# ============================================================
security.login-rate-limit.enabled=true
security.login-rate-limit.capacity=5
security.login-rate-limit.window-seconds=900
